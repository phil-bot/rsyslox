# rsyslox Configuration
# High-performance REST API for rsyslog/MySQL

# API Security (REQUIRED for production!)
# Generate with: openssl rand -hex 32
API_KEY=

# Server
SERVER_HOST=0.0.0.0
SERVER_PORT=8000

# SSL/TLS (optional)
USE_SSL=false
SSL_CERTFILE=/opt/rsyslox/certs/cert.pem
SSL_KEYFILE=/opt/rsyslox/certs/key.pem

# CORS (comma-separated origins, or * for all)
ALLOWED_ORIGINS=*

# Database Connection (Choose ONE option)

# Option 1: Connection String (NEW in v0.2.3+)
# Full MySQL DSN - most flexible
# DB_CONNECTION_STRING=rsyslog:password@tcp(localhost)/Syslog?parseTime=true&charset=utf8mb4

# Option 2: Individual Variables (RECOMMENDED)
# Set these directly for simple configurations
DB_HOST=localhost
DB_NAME=Syslog
DB_USER=rsyslog
DB_PASS=

# Option 3: rsyslog Config File (FALLBACK)
# Only used if Options 1 and 2 are not set
# WARNING: File must be readable by API user!
RSYSLOG_CONFIG_PATH=/etc/rsyslog.d/mysql.conf

# -------------------------------------------------
# Cleanup / Housekeeping (optional)
# Automatically deletes old log entries when disk
# usage exceeds a configurable threshold.
# -------------------------------------------------

# Enable the cleanup service (default: false)
CLEANUP_ENABLED=false

# Filesystem path to monitor for disk usage.
# Should point to the partition where the database
# stores its data files.
# Default: /var/lib/mysql
CLEANUP_DISK_PATH=/var/lib/mysql

# Maximum allowed disk usage in percent (0-100).
# When usage exceeds this value, old records are
# deleted until usage drops below the threshold.
# Default: 85
CLEANUP_THRESHOLD_PERCENT=85

# Number of records to delete per cleanup run.
# Larger values free up space faster but cause
# more database load per cycle.
# Default: 1000
CLEANUP_BATCH_SIZE=1000

# How often the disk usage is checked.
# Uses Go duration format: 15m, 1h, 30s, etc.
# Default: 15m
CLEANUP_INTERVAL=15m
